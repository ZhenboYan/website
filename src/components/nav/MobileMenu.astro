---
const navLinks = [
  { label: 'About', href: '/about' },
  { label: 'Work With Me', href: '/work-with-me' },
  { label: 'Writing', href: '/writing' },
  { label: 'Events', href: '/events' },
];
---

<dialog id="mobile-menu" class="mobile-menu">
  <div class="mobile-menu__inner">
    <button class="mobile-menu__close" aria-label="Close menu">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <line x1="18" y1="6" x2="6" y2="18" />
        <line x1="6" y1="6" x2="18" y2="18" />
      </svg>
    </button>

    <nav class="mobile-menu__nav">
      {navLinks.map((link) => (
        <a href={link.href} class="mobile-menu__link">{link.label}</a>
      ))}
    </nav>

    <a href="/work-with-me#contact" class="mobile-menu__cta">Get in Touch</a>
  </div>
</dialog>

<style>
  .mobile-menu {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    border: none;
    background: var(--bg);
    padding: 0;
    z-index: 100;
  }
  .mobile-menu::backdrop {
    background: transparent;
  }
  .mobile-menu[open] {
    display: flex;
  }
  .mobile-menu__inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    padding: var(--page-padding);
    position: relative;
  }
  .mobile-menu__close {
    position: absolute;
    top: 1.5rem;
    right: var(--page-padding);
    color: var(--text-primary);
    padding: 0.5rem;
  }
  .mobile-menu__nav {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-lg);
  }
  .mobile-menu__link {
    font-family: var(--font-display);
    font-size: 2rem;
    font-weight: 400;
    color: var(--text-primary);
    transition: color var(--ease);
  }
  .mobile-menu__link:hover {
    color: var(--accent);
  }
  .mobile-menu__cta {
    position: absolute;
    bottom: 3rem;
    left: var(--page-padding);
    right: var(--page-padding);
    display: block;
    text-align: center;
    font-family: var(--font-body);
    font-size: 0.8rem;
    font-weight: 500;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    padding: 1rem;
    border: 1px solid var(--accent);
    border-radius: 2px;
    color: var(--accent);
    transition: background-color var(--ease), color var(--ease);
  }
  .mobile-menu__cta:hover {
    background-color: var(--accent);
    color: var(--bg);
  }
</style>

<script>
  function initMobileMenu() {
    const dialog = document.getElementById('mobile-menu') as HTMLDialogElement;
    if (!dialog) return;

    const closeBtn = dialog.querySelector('.mobile-menu__close');
    const links = dialog.querySelectorAll('a');

    closeBtn?.addEventListener('click', () => dialog.close());
    links.forEach((link) => link.addEventListener('click', () => dialog.close()));
  }

  initMobileMenu();
  document.addEventListener('astro:after-swap', initMobileMenu);
</script>
